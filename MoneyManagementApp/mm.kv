<RegistrationScreen>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Registration'
            font_size: self.width / 20
            background_color: (.4, .5, 100, .3)
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    size: self.size
                    pos: self.pos
        GridLayout:
            cols: 2
            Label:
                text:'Username'
            TextInput:
	            multiline: False
                id: username
                halign: "center"
            Label:
                text:'Email'
            TextInput:
	            multiline: False
                id: 'email'
                halign: "center"
            Label:
                text: 'Password'
            TextInput:
	            multiline: False
                id: password
                password: True
                halign: "center"
            Label:
                text: 'Password (confirmation)'
            TextInput:
	            multiline: False
                id: confirmation
                password: True
                halign: "center"
            Label:
                text: 'Phone number'
            TextInput:
	            multiline: False
                id: phone_number
                halign: "center"                
        BubbleButton:
            background_color: (4, 0, 100, 5)
            size_hint: 0.5, 0.4
            pos_hint: {'x':.25 , 'y': .5}
            text: "Submit"
            on_press:
                root.register(app)
<LoginScreen>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Login'
            font_size: self.width / 20
            background_color: (.4, .5, 100, .3)
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    size: self.size
                    pos: self.pos
        GridLayout:
            cols: 2

            Label:
                text:'Username'
            
            TextInput:
	            multiline: False
                id: username
                halign: "center"                
        
            Label:
                text: 'Password'
            
            TextInput:
	            multiline: False
                id: password
                password: True
                halign: "center"                        

        BubbleButton:
            background_color: (4, 0, 100, 5)
            size_hint: 0.5, 0.4
            pos_hint: {'x':.25 , 'y': .5}
            text: "Login"
            on_press:
                root.login(app)
       
        BoxLayout:
            orientation: 'horizontal'
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Forgot Password"
                on_press:
                    root.reset_password(app)
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "New User"
                on_press:
                    root.register_new_user(app)

<MenuScreen>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Menu'
            font_size: self.width / 20
            background_color: (.4, .5, 100, .3)
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    size: self.size
                    pos: self.pos
        BubbleButton:
            text: 'Transactions'
            background_color: (.4, .5, 100, .3)
            on_press:
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 1
                root.manager.current = "TransactionsScreen"
                

        BubbleButton:
            text: 'Schedule'
            background_color: (.4, .5, 100, .3)
            on_press:
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 1
                root.manager.current = "ScheduleScreen"

        BubbleButton:
            text: 'Budgets'
            background_color: (.4, .5, 100, .3)
            on_press:
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 1
                root.manager.current = "BudgetsScreen"

        BubbleButton:
            text: 'Wallets'
            background_color: (.4, .5, 100, .3)
            on_press:
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 1
                root.manager.current = "WalletsScreen"

        BubbleButton:
            text: 'Goals'
            background_color: (.4, .5, 100, .3)
            on_press:
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 1
                root.manager.current = "GoalsScreen"
        
        BubbleButton:
            background_color: (4, 0, 100, 5)
            size_hint: 0.5, 0.4
            pos_hint: {'x':.25 , 'y': .5}
            text: "Logout"
            on_press:
                root.log_out(app)

<TransactionsScreen>
    on_enter: root.load_transactions(app)
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Transactions'
        BoxLayout:
            orientation: 'horizontal'
            Button:
                text: "ID"
                on_press: root.sort_table(self)
            Button:
                text: "Date"
                on_press: root.sort_table(self)
            Button:
                text: "Amount"
                on_press: root.sort_table(self)
            Button:
                text: "Loc"
                on_press: root.sort_table(self)
            Button:
                text: "Type"
                on_press: root.sort_table(self)
            Button:
                text: "Tag"
                on_press: root.sort_table(self)
            Button:
                text: "Wallet"
                on_press: root.sort_table(self)
        ScrollView:
            bar_inactive_color: (1, 1, 1, 1)
            scroll_type: ["bars"]
            bar_color: (1,1,1,1)
            bar_width: 10
            GridLayout:
                cols: 7        
        BoxLayout:
            orientation: 'horizontal'
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Add Transaction"
                on_press:
                    root.manager.transition.direction = "left"
                    root.manager.transition.duration = 1
                    root.manager.current = "AddTransactionScreen"
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Return to Menu"
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "MenuScreen"
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Schedule"
                on_press:
                    root.manager.transition.direction = "up"
                    root.manager.transition.duration = 1
                    root.manager.current = "ScheduleScreen"
        
<AddTransactionScreen>
    btn: btn.__self__
    dropdown: dropdown.__self__
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Add Transaction'
        GridLayout:
            cols: 2
            Label:
                text: 'Location'
            
            TextInput:
	            multiline: False
                halign: "center"

            Label:
                text: 'Date'
            
            TextInput:
	            multiline: False
                text: root.today_timestamp()
                halign: "center"
            
            Label:
                text: 'Amount'
            
            TextInput:
	            multiline: False
                halign: "center"

            Label:
                text: 'Transaction Type'
            
            Button:
                id: btn
                text: "Withdrawl"
                on_parent: dropdown.dismiss()
                size: self.parent.children[0].size
                on_press: dropdown.open(self)
                DropDown:
                    id: dropdown
                    on_select: btn.text = f'{args[1]}'
                    
                    Button:
                        text: "Withdrawl"
                        size_hint_y: None
                        on_press: dropdown.select("Withdrawl")
                    Button:
                        text: "Deposit"
                        size_hint_y: None
                        on_press: dropdown.select("Deposit")

            Label:
                text: 'Tag'
            
            TextInput:
                text: 'No Tag'
                multiline: False
                halign: "center"
            Label:
                text: 'Wallet Name'
            
            TextInput:
                text: 'No Wallet'
                multiline: False
                halign: "center"
            Label:
                text: 'Frequency'
            
            TextInput:
                text: 'Days'
                multiline: False
                halign: "center"                
                                
        BoxLayout:
            orientation: 'horizontal'
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Back"
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "TransactionsScreen"
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Add Transaction"
                on_press:
                    root.update_db(app)


<ViewTransactionScreen>    
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "Transaction Details"
        GridLayout:
            cols: 2
            Label:
                text: "Transaction ID"
            Label:
                id: transaction_id
                text: ""
            Label:
                text: "Date"
            Label:
                text: ""
            Label:
                text: "Amount"
            Label:
                text: ""
            Label:
                text: "Location"
            Label:
                text: ""
            Label:
                text: "Type"
            Label:
                text: ""
            Label:
                text: "Tag"
            Label:
                text: ""
            Label:
                text: "Wallet"
            Label:
                text: ""
        BoxLayout:
            orientation: "horizontal"
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Transactions"
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "TransactionsScreen"
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Schedule"
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "ScheduleScreen"
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Schedule Transaction"
                on_press:
                    root.schedule_transaction()
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Delete"
                on_press:
                    root.delete_transaction(app, transaction_id.text)

<ScheduleScreen>
    on_enter:
        root.clear_calender()
        root.load_schedule(app)
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Schedule'
        Label:
            text: 'Year'
        BoxLayout:
            orientation: 'horizontal'
            BubbleButton: 
                text: "<"
                on_press:
                    root.change_month(self)
            Label:
                id: current_month
                text: ""
            BubbleButton:
                text: ">"
                on_press:
                    root.change_month(self)
        GridLayout:
            cols: 7
        BubbleButton:
            background_color: (4, 0, 100, 5)
            text: "Return To Menu"
            on_press:
                root.manager.transition.direction = "right"
                root.manager.transition.duration = 1
                root.manager.current = "MenuScreen"
<DayScreen>
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "Date"
        BoxLayout:
            orientation: "horizontal"
            Label:
                text: "Transaction ID"
            Label:
                text: "Frequency"
            Label:
                text: "Scheduled on"
            Label:
                text: "Transaction Type"
            Label:
                text: "Wallet"
        GridLayout:
            cols: 5

        BoxLayout:
            orientation: "horizontal"
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Add Transaction"
                on_press:
                    root.add_transaction()
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Back"
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "ScheduleScreen"



