<RegistrationScreen>:
    username: username.__self__
    email: email.__self__
    password: password.__self__
    confirmation: confirmation.__self__
    phone_number: phone_number.__self__
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Registration'
            font_size: self.width / 20
            background_color: (.4, .5, 100, .3)
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    size: self.size
                    pos: self.pos
        GridLayout:
            cols: 2
            Label:
                text:'Username'
            TextInput:
	            multiline: False
                id: username
                halign: "center"
            Label:
                text:'Email'
            TextInput:
	            multiline: False
                id: email
                halign: "center"
            Label:
                text: 'Password'
            TextInput:
	            multiline: False
                id: password
                password: True
                halign: "center"
            Label:
                text: 'Password (confirmation)'
            TextInput:
	            multiline: False
                id: confirmation
                password: True
                halign: "center"
            Label:
                text: 'Phone number'
            TextInput:
	            multiline: False
                id: phone_number
                halign: "center"                
        BubbleButton:
            background_color: (4, 0, 100, 5)
            size_hint: 0.5, 0.4
            pos_hint: {'x':.25 , 'y': .5}
            text: "Submit"
            on_press:
                root.register(app)
<LoginScreen>:
    username: username.__self__
    password: password.__self__
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Login'
            font_size: self.width / 20
            background_color: (.4, .5, 100, .3)
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    size: self.size
                    pos: self.pos
        GridLayout:
            cols: 2

            Label:
                text:'Username'
            
            TextInput:
	            multiline: False
                id: username
                halign: "center"                
        
            Label:
                text: 'Password'
            
            TextInput:
	            multiline: False
                id: password
                password: True
                halign: "center"                        

        BubbleButton:
            background_color: (4, 0, 100, 5)
            size_hint: 0.5, 0.4
            pos_hint: {'x':.25 , 'y': .5}
            text: "Login"
            on_press:
                root.login(app)
       
        BoxLayout:
            orientation: 'horizontal'
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Forgot Password"
                on_press:
                    root.reset_password()
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "New User"
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "RegistrationScreen"

<MenuScreen>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Menu'
            font_size: self.width / 20
            background_color: (.4, .5, 100, .3)
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    size: self.size
                    pos: self.pos
        BubbleButton:
            text: 'Transactions'
            background_color: (.4, .5, 100, .3)
            on_press:
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 1
                root.manager.current = "TransactionsScreen"
                

        BubbleButton:
            text: 'Schedule'
            background_color: (.4, .5, 100, .3)
            on_press:
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 1
                root.manager.current = "ScheduleScreen"

        BubbleButton:
            text: 'Budgets'
            background_color: (.4, .5, 100, .3)
            on_press:
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 1
                root.manager.current = "BudgetScreen"

        BubbleButton:
            text: 'Wallets'
            background_color: (.4, .5, 100, .3)
            on_press:
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 1
                root.manager.current = "WalletsScreen"

        BubbleButton:
            text: 'Goals'
            background_color: (.4, .5, 100, .3)
            on_press:
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 1
                root.manager.current = "GoalsScreen"
        
        BubbleButton:
            background_color: (4, 0, 100, 5)
            size_hint: 0.5, 0.4
            pos_hint: {'x':.25 , 'y': .5}
            text: "Logout"
            on_press:
                root.log_out(app)

<TransactionsScreen>
    on_enter: root.display_transactions(app)
    gl: gl.__self__
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Transactions'
        BoxLayout:
            orientation: 'horizontal'
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "ID"
                on_press: root.sort_table(self, app)
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Date"
                on_press: root.sort_table(self, app)
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Amount"
                on_press: root.sort_table(self, app)
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Loc"
                on_press: root.sort_table(self, app)
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Type"
                on_press: root.sort_table(self, app)
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Tag"
                on_press: root.sort_table(self, app)
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Wallet"
                on_press: root.sort_table(self, app)
        ScrollView:
            bar_inactive_color: (1, 1, 1, 1)
            scroll_type: ["bars"]
            bar_color: (1,1,1,1)
            bar_width: 10
            GridLayout:
                id: gl
                cols: 7        
        BoxLayout:
            orientation: 'horizontal'
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Add Transaction"
                on_press:
                    root.manager.transition.direction = "left"
                    root.manager.transition.duration = 1
                    root.manager.current = "AddTransactionScreen"
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Return to Menu"
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "MenuScreen"
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Schedule"
                on_press:
                    root.manager.transition.direction = "up"
                    root.manager.transition.duration = 1
                    root.manager.current = "ScheduleScreen"
        
<AddTransactionScreen>
    transaction_type: transaction_type.__self__
    location: location.__self__
    date: date.__self__
    amount: amount.__self__
    tag: tag.__self__
    wallet: wallet.__self__
    calender: calender.__self__
    dropdown: dropdown.__self__
    on_enter:
        root.today_timestamp()
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Add Transaction'
        GridLayout:
            cols: 2
            Label:
                text: 'Location'
            
            TextInput:
                id: location
	            multiline: False
                halign: "center"

            Label:
                text: 'Date'
            
            TextInput:
                id: date
	            multiline: False
                halign: "center"
            
            Label:
                text: 'Amount'
            
            TextInput:
                id: amount
	            multiline: False
                halign: "center"

            Label:
                text: 'Transaction Type'
            
            Button:
                id: transaction_type
                text: "Withdrawl"
                on_parent: dropdown.dismiss()
                size: self.parent.children[0].size
                on_press: dropdown.open(self)
                DropDown:
                    id: dropdown
                    on_select: transaction_type.text = f'{args[1]}'
                    
                    Button:
                        text: "Withdrawl"
                        size_hint_y: None
                        on_press: dropdown.select("Withdrawl")
                    Button:
                        text: "Deposit"
                        size_hint_y: None
                        on_press: dropdown.select("Deposit")

            Label:
                text: 'Tag'
            
            TextInput:
                id: tag
                text: 'No Tag'
                multiline: False
                halign: "center"
            Label:
                text: 'Wallet Name'
            
            TextInput:
                id: wallet
                text: 'Standard Wallet'
                multiline: False
                halign: "center"
            Label:
                text: 'Frequency'
            
            Button:
                id: calender
                text: 'Schedule'
                on_press: root.build_calender(app)

                                
        BoxLayout:
            orientation: 'horizontal'
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Back"
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "TransactionsScreen"
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Add Transaction"
                on_press:
                    root.add_transaction(app)


<ViewTransactionScreen>
    transaction_id: transaction_id.__self__
    date: date.__self__
    amount: amount.__self__
    location: location.__self__
    type: type.__self__
    tag: tag.__self__
    wallet: wallet.__self__
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "Transaction Details"
        GridLayout:
            cols: 2
            Label:
                text: "Transaction ID"
            Label:
                id: transaction_id
                text: ""
            Label:
                text: "Date"
            Label:
                id: date
                text: ""
            Label:
                text: "Amount"
            Label:
                id: amount
                text: ""
            Label:
                text: "Location"
            Label:
                id: location
                text: ""
            Label:
                text: "Type"
            Label:
                id: type
                text: ""
            Label:
                text: "Tag"
            Label:
                id: tag
                text: ""
            Label:
                text: "Wallet"
            Label:
                id: wallet
                text: ""
        BoxLayout:
            orientation: "horizontal"
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Transactions"
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "TransactionsScreen"
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Schedule Transaction"
                on_press:
                    root.schedule_transaction(app)
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Delete"
                on_press:
                    root.delete_transaction(app)

<ScheduleScreen>
    schedule_label: schedule_label.__self__
    year_label: year_label.__self__
    gl: gl.__self__
    current_month: current_month.__self__
    on_enter:
        root.clear_calender()
        root.load_schedule(app)
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: schedule_label
            text: 'Schedule'
        Label:
            id: year_label
            size_hint: (.001, .001)
            pos_hint: {'x':.5 , 'y': .5}
        BoxLayout:
            orientation: 'horizontal'
            BubbleButton: 
                text: "<"
                on_press:
                    root.change_month(self, app)
            Label:
                id: current_month
                text: ""
            BubbleButton:
                text: ">"
                on_press:
                    root.change_month(self, app)
        GridLayout:
            id: gl
            cols: 7
        BubbleButton:
            background_color: (4, 0, 100, 5)
            text: "Return To Menu"
            on_press:
                root.manager.transition.direction = "right"
                root.manager.transition.duration = 1
                root.manager.current = "MenuScreen"


<DayScreen>
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "Date"
        BoxLayout:
            orientation: "horizontal"
            Label:
                text: "Transaction ID"
            Label:
                text: "Frequency"
            Label:
                text: "Scheduled on"
            Label:
                text: "Transaction Type"
            Label:
                text: "Wallet"
        GridLayout:
            cols: 5

        BoxLayout:
            orientation: "horizontal"
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Add Transaction"
                on_press:
                    root.add_transaction()
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: "Back"
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "ScheduleScreen"

<BudgetScreen>
    on_enter: root.load_budgets(app)
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Budgets'
        BoxLayout:
            orientation: 'horizontal'
            Label:
                text: 'Budget ID'
            Label:
                text: 'Wallet Name'
            Label:
                text: 'Budget Name'
            Label:
                text: 'Amount'
        GridLayout:
            cols: 4
        BoxLayout:
            orientation: 'horizontal'
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: 'Add Budget'
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: 'Back'
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "MenuScreen"




<AddBudgetScreen>
    gl: gl.__self__
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'New Budget'
        GridLayout:
            id: gl
            cols: 2
            BubbleButton:
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "WalletsScreen"  




<WalletsScreen>
    on_enter: root.load_wallets(app)
    gl: gl.__self__
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Wallets'
        BoxLayout:
            orientation: 'horizontal'
            Label:
                text: 'Wallet ID'
            Label:
                text: 'Wallet Name'
            Label:
                text: 'Wallet Amount'
            Label:
                text: 'Description'
        GridLayout:
            id: gl
            cols: 4
        BoxLayout:
            orientation: 'horizontal'        
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: 'Add Wallet'
                on_press:
                    root.manager.transition.direction = "left"
                    root.manager.transition.duration = 1
                    root.manager.current = "AddWalletScreen"

            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: 'Back'
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "MenuScreen"

<AddWalletScreen>
    gl: gl.__self__
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'New Wallet'
        GridLayout:
            id: gl
            cols: 2
            Label:
                text: 'Wallet Name'
            TextInput:
                text: ""
                halign: "center"                    
            Label:
                text: 'Wallet Amount'
            TextInput:
                text: ''
                halign: "center"    
            Label:
                text: 'Wallet Description'
            TextInput:
                text: ''    
                halign: "center"
        BoxLayout:
            orientation: 'horizontal'
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: 'Add To Wallets'
                on_press:
                    root.add_wallet(app)
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: 'Back'
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "WalletsScreen"                 



<GoalsScreen>
    on_enter: root.load_goals(app)
    gl: gl.__self__
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Goals'
        BoxLayout:
            orientation: 'horizontal'
            Label:
                text: 'Goal ID'
            Label:
                text: 'Wallet Name'
            Label:
                text: 'Goal Amount'
            Label:
                text: 'Description'
        GridLayout:
            id: gl
            cols: 4
        BoxLayout:
            orientation: 'horizontal'        
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: 'Add Goal'
                on_press:
                    root.manager.transition.direction = 'left'
                    root.manager.transition.duration = 1
                    root.manager.current = 'AddGoalScreen'
            BubbleButton:
                background_color: (4, 0, 100, 5)
                text: 'Back'
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    root.manager.current = "MenuScreen"

        